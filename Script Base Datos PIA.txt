CREATE USER UserPia
IDENTIFIED BY baseprogra;

GRANT CONNECT, RESOURCE TO UserPia;

CONNECT UserPia/baseprogra;

CREATE TABLE MUNICIPIOS(
IdMun NUMBER PRIMARY KEY,
Nombre VARCHAR2(30));

CREATE TABLE COLONIAS(
IdColonia NUMBER PRIMARY KEY,
Nombre VARCHAR2(30),
IdMun NUMBER CONSTRAINT FK_MUN_COL REFERENCES MUNICIPIOS(IdMun)ON DELETE CASCADE);


CREATE TABLE Rutas (
IdRuta NUMBER PRIMARY KEY,
NombreRuta varchar2(30),
IdMunicipio NUMBER CONSTRAINT FK_MUNICIPIO_RUTAS REFERENCES MUNICIPIOS(IdMun)ON DELETE CASCADE,
precio Number,
KmRecorridos NUMBER,
TiempoEstimado Number);

CREATE TABLE TipoEmpleado (
IdTipoEmpleado NUMBER PRIMARY KEY,
Nombre VARCHAR2(30));


CREATE TABLE Empresa (
IdEmpresa NUMBER PRIMARY KEY,
Nombre VARCHAR2(30),
Telefono NUMBER,
Municipio NUMBER CONSTRAINT FK_EMPRESA_MUNICIPIOS REFERENCES MUNICIPIOS(IdMun) ON DELETE CASCADE,
Colonia VARCHAR2(30),
CalleyNo VARCHAR2(30),
CodPostal NUMBER,
FechaFundacion DATE);

CREATE TABLE Camiones (
IdCamion NUMBER PRIMARY KEY,
Marca VARCHAR2(30),
Modelo VARCHAR2(30),
CapacidadPasajeros NUMBER,
CapacidadTanqueDiesel NUMBER,
IdEmpresa NUMBER CONSTRAINT FK_CAMIONES_EMPRESA REFERENCES Empresa(IdEmpresa)ON DELETE CASCADE);


CREATE TABLE Empleado (
IdEmpleado NUMBER PRIMARY KEY,
Nombre VARCHAR2(30),
Apellidos VARCHAR2(30),
IdMunicipio NUMBER CONSTRAINT FK_EMPLEADO_MUNICIPIOS REFERENCES MUNICIPIOS(IdMun)ON DELETE CASCADE,
IdColonia NUMBER CONSTRAINT FK_EMPLEADO_COLONIAS REFERENCES COLONIAS(IdColonia)ON DELETE CASCADE,
CalleyNo VARCHAR2(30),
CodPostal NUMBER,
FechaNac DATE,
Salario NUMBER,
EdoCivil CHAR(1),
CorreoEmpresarial VARCHAR2(30),
Sexo CHAR(1),
Turno CHAR(1),
Nacionalidad CHAR(1),
FechaIngreso DATE,
IdEmpresa NUMBER CONSTRAINT FK_IdEmpresa REFERENCES Empresa(IdEmpresa)ON DELETE CASCADE,
IdTipoEmpleado NUMBER CONSTRAINT FK_IdTipoEmpleado REFERENCES TipoEmpleado(IdTipoEmpleado)ON DELETE CASCADE);

CREATE TABLE Usuarios (
IdUsuario NUMBER,
TipoUsuario VARCHAR2(30),
IdEmpleado NUMBER CONSTRAINT FK_Empleados_Usuarios REFERENCES Empleado(IdEmpleado)ON DELETE CASCADE,
upassword Varchar2(30)
);


CREATE TABLE CamionRuta(
IdCamionRuta Number Primary key,
IdCamion Number Constraint FK_IdCamion REFERENCES Camiones(IdCamion)ON DELETE CASCADE,
IdRuta Number Constraint FK_IdRuta REFERENCES Rutas(IdRuta)ON DELETE CASCADE);

CREATE TABLE ChoferCamion(
IdChoferCamionRuta Number Primary key,
IdCamionRuta Number Constraint FK_IdCamionRuta REFERENCES CamionRuta(IdCamionRuta)ON DELETE CASCADE,
IdEmpleado NUMBER CONSTRAINT FK_Empleado_Chofer REFERENCES EMPLEADO(IdEmpleado) ON DELETE CASCADE,
FechaAsignacion Date);

CREATE TABLE Vuelta(
IdVuelta Number Primary key,
IdChoferCamionRuta Number Constraint FK_IdChoferCamionRuta REFERENCES ChoferCamion (IdChoferCamionRuta)ON DELETE CASCADE,
HoraSalida Date,
HoraLlegada Date,
OdometroInicial NUMBER,
OdometroFinal NUMBER,
PasajerosQueAbordaron NUMBER);


CREATE OR REPLACE PROCEDURE USERPIA.sp_Camiones_Buscar
(pIdCamion IN NUMBER, c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM CAMIONES WHERE IDCAMION=pIdCamion;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CAMIONES_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM CAMIONES;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Camiones_Eliminar
(pIdCamion IN NUMBER)
IS
BEGIN
DELETE FROM CAMIONES WHERE IDCAMION=pIdCamion;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Camiones_Insertar
(pIdCamion IN NUMBER, pMarca IN VARCHAR2,pModelo IN VARCHAR2, pCapacidadPasajeros IN NUMBER,
pCapacidadDiesel IN NUMBER,pIdEmpresa IN NUMBER)
IS
BEGIN
INSERT INTO CAMIONES VALUES(pIdCamion,pMarca,pModelo,pCapacidadPasajeros,pCapacidadDiesel,pIdEmpresa);
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Camiones_Modificar
(pIdCamion IN NUMBER, pMarca IN VARCHAR2,pModelo IN VARCHAR2, pCapacidadPasajeros IN NUMBER,
pCapacidadDiesel IN NUMBER,pIdEmpresa IN NUMBER)
IS 
BEGIN
UPDATE CAMIONES SET MARCA=pMarca, Modelo=pModelo, CapacidadPasajeros=pCapacidadPasajeros,
CapacidadTanqueDiesel=pCapacidadDiesel, IdEmpresa=pIdEmpresa
WHERE IDCAMION=pIdCamion;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CAMIONRUTA_BUSCAR
(pIdCamionRuta IN NUMBER,c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM CAMIONRUTA WHERE IDCAMIONRUTA=pIdCamionRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CAMIONRUTA_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN 
OPEN c_cursor FOR  SELECT * FROM CAMIONRUTA;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CAMIONRUTA_ELIMINAR
(pIdCamionRuta IN NUMBER)
IS
BEGIN
DELETE FROM CAMIONRUTA WHERE IDCAMIONRUTA=pIdCamionRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CAMIONRUTA_MODIFICAR
(pIdCamionRuta IN NUMBER, pIdCamion IN NUMBER, pIdRuta IN NUMBER)
IS
BEGIN
UPDATE CAMIONRUTA SET IDCAMIONRUTA=pIdCamionRuta,IDCAMION=pIdCamion,IDRUTA=pIdRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CAMIONRUTA_REGISTRAR
(pIdCamionRuta IN NUMBER, pIdCamion IN NUMBER, pIdRuta IN NUMBER)
IS
BEGIN
INSERT INTO CAMIONRUTA VALUES(pIdCamionRuta,pIdCamion,pIdRuta);
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CHOFERCAMION_BUSCAR
(pIdChoferCamionRuta IN NUMBER,c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM CHOFERCAMION WHERE IDCHOFERCAMIONRUTA=pIdChoferCamionRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CHOFERCAMION_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN 
OPEN c_cursor FOR  SELECT * FROM CHOFERCAMION;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CHOFERCAMION_ELIMINAR
(pIdChoferCamionRuta IN NUMBER)
IS
BEGIN
DELETE FROM CHOFERCAMION WHERE IDCHOFERCAMIONRUTA=pIdChoferCamionRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CHOFERCAMION_MODIFICAR
(pIdChoferCamionRuta IN NUMBER,pIdCamionRuta IN NUMBER,pIdEmpleado IN NUMBER,pFechaAsignacion IN DATE)
IS
BEGIN
UPDATE CHOFERCAMION SET IDCHOFERCAMIONRUTA=pIdChoferCamionRuta, IDCAMIONRUTA=pIdCamionRuta,IDEMPLEADO=pIdEmpleado, FECHAASIGNACION=pFechaAsignacion
WHERE IDCHOFERCAMIONRUTA=pIdChoferCamionRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_CHOFERCAMION_REGISTRAR
(pIdChoferCamionRuta IN NUMBER,pIdCamionRuta IN NUMBER,pIdEmpleado IN NUMBER,pFechaAsignacion IN DATE)
IS
BEGIN
INSERT INTO CHOFERCAMION VALUES(pIdChoferCamionRuta,pIdCamionRuta,pIdEmpleado,pFechaAsignacion);
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Colonias_Buscar
(pIdColonia IN NUMBER, c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM COLONIAS WHERE IDCOLONIA=pIdColonia ORDER BY NOMBRE;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_COLONIAS_BUSCARX_MUNICIPIO
(pIdMun IN NUMBER,c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM COLONIAS WHERE IDMUN=pIdMun;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_COLONIAS_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT*FROM COLONIAS;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Colonias_Eliminar
(pIdColonia IN NUMBER)
IS
BEGIN
DELETE FROM COLONIAS WHERE IdColonia=pIdColonia;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Colonias_Insertar
(pIdColonia IN NUMBER, pNombre IN VARCHAR2,pIdMun IN NUMBER)
IS
BEGIN
INSERT INTO Colonias VALUES(pIdColonia,pNombre,pIdMun);
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Colonias_Modificar
(pIdColonia IN NUMBER, pNombre IN VARCHAR2,pIdMun IN NUMBER)
IS
BEGIN
UPDATE COLONIAS SET IdColonia=pIdColonia, Nombre=pNombre,IDMUN=pIdMun
WHERE IdColonia=pIdColonia;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_EMPLEADO_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM EMPLEADO;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empleado_Eliminar (
pIdEmpleado IN NUMBER)
AS
BEGIN
	DELETE FROM EMPLEADO WHERE IdEmpleado = pIdEmpleado;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empleado_Modificar(
pIdEmpleado IN NUMBER,
pNombre IN VARCHAR2,
pApellidos IN VARCHAR2,
pIdMunicipio IN NUMBER,
pIdColonia IN NUMBER,
pCalleyNum IN VARCHAR2,
pCodPostal IN NUMBER,
pFechaNac IN DATE,
pSalario IN NUMBER,
pEdoCivil IN CHAR,
pCorreoEmpresarial IN VARCHAR2,
pSexo IN CHAR,
pTurno IN CHAR,
pNacionalidad IN CHAR,
pFechaIngreso IN DATE,
pIdEmpresa IN NUMBER,
pIdTipoEmpleado IN NUMBER)
AS
BEGIN
	UPDATE EMPLEADO SET Nombre=pNombre,Apellidos=pApellidos,IdMunicipio=pIdMunicipio,IdColonia=pIdColonia, CalleyNo=pCalleyNum,
	CodPostal=pCodPostal,FechaNac=pFechaNac,Salario=pSalario,EdoCivil=pEdoCivil,CorreoEmpresarial=pCorreoEmpresarial,
	Sexo=pSexo,Turno=pTurno,Nacionalidad=pNacionalidad,FechaIngreso=pFechaIngreso,IdEmpresa=pIdEmpresa,IdTipoEmpleado=pIdTipoEmpleado
	WHERE IdEmpleado=pIdEmpleado;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empleado_Registrar (
pIdEmpleado IN NUMBER,
pNombre IN VARCHAR2,
pApellidos IN VARCHAR2,
pIdMunicipio IN NUMBER,
pIdColonia IN NUMBER,
pCalleyNum IN VARCHAR2,
pCodPostal IN NUMBER,
pFechaNac IN DATE,
pSalario IN NUMBER,
pEdoCivil IN CHAR,
pCorreoEmpresarial IN VARCHAR2,
pSexo IN CHAR,
pTurno IN CHAR,
pNacionalidad IN CHAR,
pFechaIngreso IN DATE,
pIdEmpresa IN NUMBER,
pIdTipoEmpleado IN NUMBER)
AS
BEGIN
	INSERT INTO EMPLEADO VALUES (pIdEmpleado, pNombre, pApellidos, pIdMunicipio,pIdColonia,pCalleyNum, pCodPostal, pFechaNac,
	pSalario,pEdoCivil,pCorreoEmpresarial,pSexo,pTurno,pNacionalidad,pFechaIngreso,pIdEmpresa,pIdTipoEmpleado);
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empleados_Buscar(
pIdEmpleado IN NUMBER, 
C_CURSOR OUT SYS_REFCURSOR)
IS
BEGIN
	OPEN C_CURSOR FOR
	SELECT * FROM EMPLEADO
	WHERE IdEmpleado=pIdEmpleado;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empresa_Buscar(
pIdEmpresa IN NUMBER, 
C_CURSOR OUT SYS_REFCURSOR)
IS
BEGIN
	OPEN C_CURSOR FOR
	SELECT * FROM Empresa
	WHERE IdEmpresa=pIdEmpresa;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_EMPRESA_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM EMPRESA;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empresa_Eliminar (
pIdEmpresa IN NUMBER)
AS
BEGIN
	DELETE FROM EMPRESA WHERE IDEMPRESA = pIdEmpresa;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empresa_Modificar(
pIdEmpresa IN NUMBER,
pNombre IN VARCHAR2,
pTelefono IN NUMBER,
pMunicipio IN VARCHAR2,
pColonia IN VARCHAR2,
pCalleyNum IN VARCHAR2,
pCodPostal IN NUMBER,
pFechaFundacion IN DATE)
AS
BEGIN
	UPDATE EMPRESA SET Nombre=pNombre,Telefono=pTelefono,Municipio=pMunicipio,Colonia=pColonia, CalleyNo=pCalleyNum,CodPostal=pCodPostal,FechaFundacion=pFechaFundacion
	WHERE IdEmpresa=pIdEmpresa;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Empresa_Registrar (
pIdEmpresa IN NUMBER,
pNombre IN VARCHAR2,
pTelefono IN NUMBER,
pMunicipio IN VARCHAR2,
pColonia IN VARCHAR2,
pCalleyNum IN VARCHAR2,
pCodPostal IN NUMBER,
pFechaFundacion IN DATE)
AS
BEGIN
	INSERT INTO EMPRESA VALUES (pIdEmpresa, pNombre, pTelefono, pMunicipio,pColonia,pCalleyNum, pCodPostal, pFechaFundacion);
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_LOGIN
(pIdUsuario IN NUMBER,pPassword IN VARCHAR, c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT IDUSUARIO,TIPOUSUARIO FROM USUARIOS WHERE IDUSUARIO=pIdUsuario AND UPASSWORD=pPassword;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Municipios_Buscar
(pIdMun IN NUMBER,
c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM MUNICIPIOS WHERE IDMUN=pIdMun ORDER BY NOMBRE;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_MUNICIPIOS_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN 
OPEN c_cursor FOR SELECT * FROM MUNICIPIOS ORDER BY NOMBRE;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Municipios_Eliminar
(pIdMun IN NUMBER)
IS
BEGIN
DELETE FROM MUNICIPIOS WHERE IDMUN=pIdMun;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Municipios_Insertar
(pIdMun IN NUMBER, pNombre IN VARCHAR2)
IS
BEGIN
INSERT INTO MUNICIPIOS VALUES(pIdMun,pNombre);
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Municipios_Modificar
(pIdMun IN NUMBER, pNombre IN VARCHAR2)
IS
BEGIN
UPDATE MUNICIPIOS SET IDMUN=pIdMun, Nombre=pNombre
WHERE IDMUN=pIdMun;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_REPORTE_RUTAS
(pIdMunicipio IN NUMBER,c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM RUTAS WHERE IDMUNICIPIO=pIdMunicipio;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Rutas_Buscar(
pIdRuta IN NUMBER, 
C_CURSOR OUT SYS_REFCURSOR)
IS
BEGIN
	OPEN C_CURSOR FOR
	SELECT * FROM RUTAS
	WHERE IdRuta=pIdRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_RUTAS_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM RUTAS ORDER BY NombreRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Rutas_Eliminar (
pIdRuta IN NUMBER)
AS
BEGIN
	DELETE FROM RUTAS WHERE IDRUTA = pIdRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Rutas_Modificar(
pIdRuta IN NUMBER,
pNombreRuta IN VARCHAR2,
pMunicipio IN VARCHAR2,
pPrecio IN NUMBER,
pKmRecorridos IN NUMBER,
pTiempoEstimado IN NUMBER)
AS
BEGIN
	UPDATE RUTAS SET NombreRuta=pNombreRuta,IdMunicipio=pMunicipio,Precio=pPrecio,
	KmRecorridos=pKmRecorridos, TiempoEstimado=pTiempoEstimado
	WHERE IdRuta=pIdRuta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Rutas_Registrar (
pIdRuta IN NUMBER,
pNombreRuta IN VARCHAR2,
pMunicipio IN VARCHAR2,
pPrecio IN NUMBER,
pKmRecorridos IN NUMBER,
pTiempoEstimado IN NUMBER)
AS
BEGIN
	INSERT INTO RUTAS VALUES (pIdRuta, pNombreRuta, pMunicipio,pPrecio,pKmRecorridos,pTiempoEstimado);
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_TipoEmpleado_Buscar(pIdTipoEmpleado IN NUMBER,c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM TIPOEMPLEADO WHERE IDTIPOEMPLEADO=pIdTipoEmpleado;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_TipoEmpleado_Eliminar (
pIdTipoEmpleado IN NUMBER)
AS
BEGIN
	DELETE FROM TIPOEMPLEADO WHERE IDTIPOEMPLEADO = pIdTipoEmpleado;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_TipoEmpleado_Modificar
(pIdTipoEmpleado IN NUMBER,pNombre IN VARCHAR2)
IS 
BEGIN
UPDATE TIPOEMPLEADO SET NOMBRE=pNombre
WHERE IDTIPOEMPLEADO=pIdTipoEmpleado;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_TipoEmpleado_Registrar
(pIdTipoEmpleado IN NUMBER,pNombre IN VARCHAR2)
IS
BEGIN
INSERT INTO TIPOEMPLEADO VALUES(pIdTipoEmpleado,pNombre);
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_TIPOMPLEADO_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM TIPOEMPLEADO;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Usuarios_Buscar
(pIdUsuario IN NUMBER, c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM Usuarios WHERE IdUsuario=pIdUsuario;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_USUARIOS_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM USUARIOS;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Usuarios_Eliminar
(pIdUsuario IN NUMBER)
IS
BEGIN
DELETE FROM Usuarios WHERE IdUsuario=pIdUsuario;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Usuarios_Insertar
(pIdUsuario IN NUMBER, pTipoUsuario IN VARCHAR, pIdEmpleado IN NUMBER, pPassword IN VARCHAR2)
IS
BEGIN
INSERT INTO Usuarios VALUES(pIdUsuario, pTipoUsuario, pIdEmpleado,  pPassword);
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_Usuarios_Modificar
(pIdUsuario IN NUMBER, pTipoUsuario IN NUMBER, pIdEmpleado IN NUMBER, 
 ppassword IN VARCHAR2)
IS 
BEGIN
UPDATE Usuarios SET TipoUsuario= pTipoUsuario, IdEmpleado = pIdEmpleado,
 upassword=ppassword
WHERE IdUsuario=pIdUsuario;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_vuelta_buscar
(pIdVuelta IN NUMBER, c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM VUELTA WHERE IdVuelta=pIdVuelta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_VUELTA_CONSULTAR_TODO
(c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM VUELTA;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_vuelta_eliminar 
(pIdVuelta IN NUMBER)
IS 
BEGIN
DELETE FROM VUELTA WHERE Idvuelta=pIdvuelta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_vuelta_modificar
(pIdVuelta IN NUMBER, pIdChoferCamionRuta IN NUMBER,pHoraSalida IN DATE,
pHoraLlegada IN DATE, pOdometroInicial IN NUMBER, pOdometroFinal IN NUMBER,
 pPasajerosQueAbordaron IN NUMBER)
IS
BEGIN
UPDATE VUELTA SET IdChoferCamionRuta=pIdChoferCamionRuta,HoraSalida=pHoraSalida, HoraLlegada=pHoraLlegada, OdometroInicial=pOdometroInicial,
OdometroFinal=pOdometroFinal,
PasajerosQueAbordaron=pPasajerosQueAbordaron WHERE IdVuelta=pIdVuelta;
END;

CREATE OR REPLACE PROCEDURE USERPIA.sp_vuelta_registrar
(pIdVuelta IN NUMBER, pIdChoferCamionRuta IN NUMBER,pHoraSalida IN DATE,
pHoraLlegada IN DATE, pOdometroInicial IN NUMBER, pOdometroFinal IN NUMBER, pPasajerosQueAbordaron IN NUMBER)
IS
BEGIN
INSERT INTO VUELTA VALUES(pIdVuelta ,pIdChoferCamionRuta,pHoraSalida,pHoraLlegada,pOdometroInicial,pOdometroFinal,pPasajerosQueAbordaron);
END;

CREATE OR REPLACE PROCEDURE USERPIA.SP_REPORTE_EMPLEADOS
(pTurno IN CHAR,pPuesto IN VARCHAR,c_cursor OUT SYS_REFCURSOR)
IS
BEGIN
OPEN c_cursor FOR SELECT * FROM EMPLEADO WHERE TURNO=pTurno AND IDTIPOEMPLEADO=pPuesto;
END;

 